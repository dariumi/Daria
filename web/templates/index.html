<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DARIA v{{ version }}</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/static/css/desktop.css">
</head>
<body>
    <div id="desktop">
        <div id="desktop-icons"></div>
        <div id="windows-container"></div>
        <div id="daria-avatar" title="–ë—ã—Å—Ç—Ä—ã–π —á–∞—Ç">
            <div class="avatar-image">üå∏</div>
            <div class="avatar-status online"></div>
        </div>
        <div id="quick-chat" class="hidden">
            <div class="quick-chat-header"><span>üí¨ –ß–∞—Ç</span><button onclick="toggleQuickChat()">√ó</button></div>
            <div class="quick-chat-messages" id="quick-messages"></div>
            <div class="quick-chat-input">
                <input type="text" id="quick-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter')sendQuickMessage()">
                <button onclick="sendQuickMessage()">‚û§</button>
            </div>
        </div>
        <div id="notifications-container"></div>
    </div>

    <div id="taskbar">
        <button id="start-button" onclick="toggleStartMenu()"><span>üå∏</span><span>DARIA</span></button>
        <div id="taskbar-windows"></div>
        <div id="taskbar-right">
            <div id="attention-toggle" onclick="toggleAttention()" title="–í–Ω–∏–º–∞–Ω–∏–µ">üíï</div>
            <div id="status-indicator" class="offline">‚óè</div>
            <div id="clock"></div>
        </div>
    </div>

    <div id="start-menu" class="hidden">
        <div class="start-header">
            <div class="start-avatar-wrap">
                <div class="start-avatar">üå∏</div>
            </div>
            <div><div class="start-name">–î–∞—Ä—å—è</div><div class="start-version">v{{ version }}</div></div>
            <img id="start-user-avatar" class="start-user-avatar hidden" src="" alt="">
        </div>
        <div class="start-items">
            <div class="start-group-title">–û–±—â–µ–Ω–∏–µ</div>
            <div class="start-item" onclick="openWindow('chat');toggleStartMenu()"><span>üí¨</span>–†–∞–∑–≥–æ–≤–æ—Ä —Å –î–∞—à–µ–π</div>
            <div class="start-item" onclick="openWindow('self');toggleStartMenu()"><span>ü™û</span>–°–æ—Å—Ç–æ—è–Ω–∏–µ –î–∞—à–∏</div>
            <div class="start-item" onclick="openWindow('senses');toggleStartMenu()"><span>üëÅÔ∏è</span>–ß—É–≤—Å—Ç–≤–∞ –∏ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ</div>
            <div class="start-group-title">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</div>
            <div class="start-item" onclick="openWindow('todos');toggleStartMenu()"><span>‚úÖ</span>–°–ø–∏—Å–∫–∏ –¥–µ–ª</div>
            <div class="start-item" onclick="openWindow('calendar');toggleStartMenu()"><span>üìÖ</span>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
            <div class="start-item" onclick="openWindow('files');toggleStartMenu()"><span>üìÅ</span>–§–∞–π–ª—ã</div>
            <div class="start-item" onclick="openWindow('diary');toggleStartMenu()"><span>üìù</span>–î–Ω–µ–≤–Ω–∏–∫ –î–∞—à–∏</div>
            <div class="start-item" onclick="openWindow('wiki');toggleStartMenu()"><span>üìö</span>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</div>
            <div class="start-item" onclick="openWindow('knowledge');toggleStartMenu()"><span>üìñ</span>–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä –∑–Ω–∞–Ω–∏–π</div>
            <div class="start-group-title">–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</div>
            <div class="start-item" onclick="openWindow('daria-games');toggleStartMenu()"><span>üéÆ</span>–ò–≥—Ä–æ–≤–æ–π —Ü–µ–Ω—Ç—Ä</div>
            <div class="start-item" onclick="openWindow('player');toggleStartMenu()"><span>üéµ</span>–ú—É–∑—ã–∫–∞</div>
            <div class="start-group-title">–°–∏—Å—Ç–µ–º–∞</div>
            <div class="start-item" onclick="openWindow('updater');toggleStartMenu()"><span>‚¨ÜÔ∏è</span>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è</div>
            <div class="start-item" onclick="openWindow('terminal');toggleStartMenu()"><span>üíª</span>–ö–æ–Ω—Å–æ–ª—å</div>
            <div class="start-item" onclick="openWindow('monitor');toggleStartMenu()"><span>üìà</span>–ú–æ–Ω–∏—Ç–æ—Ä –î–∞—à–∏</div>
            <div class="start-item" onclick="openWindow('store');toggleStartMenu()"><span>üõí</span>–ú–∞–≥–∞–∑–∏–Ω</div>
            <div class="start-item" onclick="openWindow('settings');toggleStartMenu()"><span>‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div class="start-item" onclick="openWindow('support');toggleStartMenu()"><span>‚òï</span>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</div>
            <div class="start-item" onclick="openWindow('about');toggleStartMenu()"><span>üíï</span>–û –î–∞—Ä—å–µ</div>
        </div>
    </div>

    <div id="welcome-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header"><h2>üå∏ –ü—Ä–∏–≤–µ—Ç!</h2></div>
            <div class="modal-body">
                <p>–Ø –î–∞—Ä—å—è, —Ç–≤–æ—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Ä—É–≥–∞!</p>
                <p>–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?</p>
                <input type="text" id="welcome-name" placeholder="–¢–≤–æ—ë –∏–º—è..." onkeypress="if(event.key==='Enter')closeWelcome()">
                <div class="gender-select">
                    <label><input type="radio" name="gender" value="male"> üë® –ü–∞—Ä–µ–Ω—å</label>
                    <label><input type="radio" name="gender" value="female"> üë© –î–µ–≤—É—à–∫–∞</label>
                </div>
            </div>
            <div class="modal-footer"><button class="btn-primary" onclick="closeWelcome()">–ù–∞—á–∞—Ç—å! üíï</button></div>
        </div>
    </div>

    <template id="window-template">
        <div class="window">
            <div class="window-header">
                <div class="window-title"><span class="window-icon"></span><span class="window-name"></span></div>
                <div class="window-controls">
                    <button class="win-btn minimize">‚àí</button>
                    <button class="win-btn maximize">‚ñ°</button>
                    <button class="win-btn close">√ó</button>
                </div>
            </div>
            <div class="window-content"></div>
            <div class="window-resize-handle"></div>
        </div>
    </template>

    <template id="chat-content">
        <div class="chat-container">
            <div class="chat-sidebar">
                <button class="new-chat-btn" onclick="newChat()">+ –ù–æ–≤—ã–π —á–∞—Ç</button>
                <div class="chat-filter-tabs">
                    <button id="chat-filter-all" onclick="setChatFilter('all')">–í—Å–µ</button>
                    <button id="chat-filter-local" onclick="setChatFilter('local')">–õ–∏—á–Ω—ã–µ</button>
                    <button id="chat-filter-telegram" onclick="setChatFilter('telegram')">Telegram</button>
                </div>
                <div class="chat-history" id="chat-history"></div>
            </div>
            <div class="chat-main">
                <div class="chat-topbar">
                    <div id="chat-current-title">–ù–æ–≤—ã–π —á–∞—Ç</div>
                    <button id="chat-current-delete" type="button" onclick="deleteCurrentChat()" disabled>–£–¥–∞–ª–∏—Ç—å —á–∞—Ç</button>
                </div>
                <div class="chat-messages" id="chat-messages"></div>
                <div class="chat-typing hidden" id="chat-typing">–î–∞—Ä—å—è –ø–µ—á–∞—Ç–∞–µ—Ç<span class="dots">...</span></div>
                <div id="chat-reply-context" class="chat-reply-context hidden"></div>
                <div id="chat-attachment-preview" class="chat-attachment-preview hidden"></div>
                <div class="chat-input-area">
                    <button class="chat-sticker-toggle" title="–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã" onclick="toggleChatTools(event)">Ôºã</button>
                    <input id="chat-attach-image" type="file" accept="image/*" onchange="onChatAttachImage(this.files?.[0])" hidden>
                    <input id="chat-attach-file" type="file" onchange="onChatAttachAnyFile(this.files?.[0])" hidden>
                    <div id="chat-tools-menu" class="chat-tools-menu hidden">
                        <button type="button" onclick="chatToolOpenStickers()">ü©∑ –°—Ç–∏–∫–µ—Ä</button>
                        <button type="button" onclick="chatToolPickImage()">üñº –ö–∞—Ä—Ç–∏–Ω–∫–∞</button>
                        <button type="button" onclick="chatToolPickFile()">üìé –§–∞–π–ª</button>
                        <button type="button" onclick="chatToolInsertLink()">üîó –°—Å—ã–ª–∫–∞</button>
                    </div>
                    <div id="chat-sticker-picker" class="chat-sticker-picker hidden"></div>
                    <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter')sendChatMessage()">
                    <button onclick="sendChatMessage()">‚û§</button>
                </div>
            </div>
        </div>
    </template>

    <template id="files-content">
        <div class="files-container">
            <div class="files-toolbar">
                <span id="files-path">/</span>
                <button onclick="goParentDirectory()">‚¨ÖÔ∏è</button>
                <button onclick="loadFiles(state.currentPath)">üîÑ</button>
                <button onclick="createNewFile()">üìÑ</button>
                <button onclick="createNewFolder()">üìÅ</button>
                <label class="upload-btn">‚¨ÜÔ∏è<input type="file" onchange="uploadFile(this)" hidden></label>
            </div>
            <div class="files-list" id="files-list"></div>
            <div id="file-editor" class="file-editor hidden">
                <div class="editor-header">
                    <input type="text" id="file-editor-path" readonly>
                    <button id="file-editor-save-btn" onclick="saveFile()">üíæ</button>
                    <button onclick="closeEditor()">‚úñ</button>
                </div>
                <div class="editor-header">
                    <span id="file-editor-kind" class="editor-kind">–§–æ—Ä–º–∞—Ç: text</span>
                </div>
                <div id="file-editor-readonly-note" class="small-note hidden">–≠—Ç–æ—Ç —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è: –¥–Ω–µ–≤–Ω–∏–∫ –≤–µ–¥—ë—Ç —Ç–æ–ª—å–∫–æ –î–∞—à–∞.</div>
                <div class="editor-body">
                    <textarea id="file-editor-content"></textarea>
                    <button id="file-assist-toggle" class="file-assist-toggle" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –î–∞—à–µ–π" onclick="toggleFileAssistPanel()">
                        <img src="/static/img/logo.png" alt="Dasha">
                    </button>
                    <div id="file-assist-panel" class="file-assist-panel hidden">
                        <div class="file-assist-head">
                            <b>üå∏ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –î–∞—à–µ–π</b>
                            <button onclick="toggleFileAssistPanel()">‚úñ</button>
                        </div>
                        <div id="file-assist-log" class="file-assist-log"></div>
                        <div class="file-assist-input">
                            <input type="text" id="file-assist-prompt" placeholder="–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∏–ª–∏ –≤—Å—ë–º —Ñ–∞–π–ª–µ?">
                            <button id="file-assist-apply-btn" onclick="assistFileWithDaria()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="todos-content">
        <div class="settings-container">
            <div class="settings-section">
                <h3>‚úÖ –î–µ–ª–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <div class="setting-row">
                    <input id="todo-user-input" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ—Å–ª—É—à–∞–π –Ω–æ–≤—ã–π —Ç—Ä–µ–∫ –∏ –Ω–∞–ø–∏—à–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ">
                    <button onclick="addUserTask()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="todo-user-list" class="todo-list"></div>
            </div>
            <div class="settings-section">
                <h3>üå∏ –î–µ–ª–∞ –î–∞—à–∏</h3>
                <div class="setting-row">
                    <button onclick="generateDashaTasks()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω—å</button>
                    <button onclick="askDashaPlans()">–û–±—Å—É–¥–∏—Ç—å –ø–ª–∞–Ω—ã</button>
                    <span id="todo-date">‚Äî</span>
                </div>
                <div id="todo-plan-summary" class="small-note">–°–µ–π—á–∞—Å: –∑–∞–≥—Ä—É–∑–∫–∞...</div>
                <div id="todo-dasha-list" class="todo-list"></div>
            </div>
        </div>
    </template>

    <template id="self-content">
        <div id="self-perception-content" class="settings-container">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </template>

    <template id="senses-content">
        <div class="settings-container">
            <div class="settings-section">
                <h3>üëÅÔ∏è –ß—Ç–æ –î–∞—à–∞ –≤–∏–¥–∏—Ç</h3>
                <div class="setting-row">
                    <input id="senses-see-input" type="text" placeholder="–û–ø–∏—à–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏–ª–∏ —ç–∫—Ä–∞–Ω...">
                    <label class="upload-btn small">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ<input id="senses-see-file" type="file" accept="image/*" hidden></label>
                    <button onclick="sensesSee()">–ê–Ω–∞–ª–∏–∑</button>
                </div>
            </div>
            <div class="settings-section">
                <h3>üëÇ –ß—Ç–æ –î–∞—à–∞ —Å–ª—ã—à–∏—Ç</h3>
                <div class="setting-row">
                    <input id="senses-hear-input" type="text" placeholder="–í—Å—Ç–∞–≤—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É —Ä–µ—á–∏/–∑–≤—É–∫–∞...">
                    <label class="upload-btn small">–ê—É–¥–∏–æ<input id="senses-hear-file" type="file" accept="audio/*" hidden></label>
                    <button onclick="sensesHear()">–ü–æ–Ω—è—Ç—å</button>
                </div>
            </div>
            <div class="settings-section">
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
                <pre id="senses-output">‚Äî</pre>
            </div>
        </div>
    </template>

    <template id="wiki-content">
        <div class="chat-container">
            <div class="chat-sidebar" id="wiki-pages"></div>
            <div class="chat-main">
                <div id="wiki-body" style="height:100%;overflow:auto;"></div>
            </div>
        </div>
    </template>

    <template id="calendar-content">
        <div class="settings-container">
            <div class="settings-section">
                <h3>üìÖ –í–∞–∂–Ω—ã–µ –¥–∞—Ç—ã</h3>
                <div class="setting-row">
                    <input id="calendar-title" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è">
                    <input id="calendar-date" type="datetime-local">
                    <button onclick="addCalendarEvent()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="calendar-list" class="calendar-list"></div>
            </div>
        </div>
    </template>

    <template id="terminal-content">
        <div class="terminal-container">
            <div class="terminal-output" id="terminal-output">
                <div class="term-line">DARIA Terminal v0.9.0</div>
                <div class="term-line">–í–≤–µ–¥–∏ help –¥–ª—è –∫–æ–º–∞–Ω–¥</div>
            </div>
            <div class="terminal-input"><span>$</span><input type="text" id="terminal-input" onkeypress="if(event.key==='Enter')executeTerminal()"></div>
        </div>
    </template>

    <template id="monitor-content">
        <div class="settings-container">
            <div class="settings-section">
                <h3>üìà –ù–∞–≥—Ä—É–∑–∫–∞ DARIA</h3>
                <div id="daria-monitor-output" class="todo-list"><div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
            </div>
        </div>
    </template>

    <template id="browser-content">
        <div class="browser-container">
            <div class="browser-toolbar">
                <button onclick="browserBack()">‚Üê</button>
                <button onclick="browserForward()">‚Üí</button>
                    <input type="text" id="browser-url" value="" placeholder="–í–≤–µ–¥–∏—Ç–µ URL –∏–ª–∏ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å" onkeypress="if(event.key==='Enter')browserGo()">
                <button onclick="browserGo()">‚Üí</button>
            </div>
            <iframe id="browser-frame" src="/api/browser/start"></iframe>
        </div>
    </template>

    <template id="daria-games-content">
        <div class="daria-games-container">
            <div class="daria-games-toolbar">
                <select id="daria-game-mode">
                    <option value="associations">–ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏</option>
                    <option value="battleship">–ú–æ—Ä—Å–∫–æ–π –±–æ–π</option>
                    <option value="maze2d">2D –õ–∞–±–∏—Ä–∏–Ω—Ç</option>
                    <option value="connect4">–ß–µ—Ç—ã—Ä–µ –≤ —Ä—è–¥</option>
                </select>
                <select id="daria-game-opponent">
                    <option value="bot">–°–æ–ø–µ—Ä–Ω–∏–∫: –ë–æ—Ç</option>
                    <option value="user">–°–æ–ø–µ—Ä–Ω–∏–∫: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                </select>
                <button onclick="startDariaGame()">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
                <button onclick="stopDariaGame()">‚èπ –°—Ç–æ–ø</button>
                <span id="daria-game-score">–°—á—ë—Ç: 0 - 0</span>
            </div>
            <div class="daria-games-status" id="daria-game-status">–°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ</div>
            <div id="daria-game-board" class="daria-game-board"></div>
            <div class="small-note" style="padding:8px 12px;">
                <span style="display:inline-block;width:10px;height:10px;border-radius:3px;background:#334155;"></span> –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
                <span style="display:inline-block;width:10px;height:10px;border-radius:3px;background:#0ea5e9;margin-left:10px;"></span> –≤–æ–¥–∞
                <span style="display:inline-block;width:10px;height:10px;border-radius:3px;background:#64748b;margin-left:10px;"></span> –∫–æ—Ä–∞–±–ª—å
                <span style="display:inline-block;width:10px;height:10px;border-radius:3px;background:#1e293b;margin-left:10px;"></span> –º–∏–º–æ
                <span style="display:inline-block;width:10px;height:10px;border-radius:3px;background:#ef4444;margin-left:10px;"></span> –ø–æ–ø–∞–¥–∞–Ω–∏–µ
            </div>
            <div class="daria-games-input">
                <input id="daria-game-input" type="text" placeholder="–ü–æ–¥—Å–∫–∞–∑–∫–∞ –∏–ª–∏ —Ö–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä: B7)" onkeypress="if(event.key==='Enter')sendDariaGameMessage()">
                <button onclick="sendDariaGameMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
            <div class="daria-games-log" id="daria-game-log"></div>
        </div>
    </template>

    <template id="player-content">
        <div class="player-layout">
            <div class="player-left">
                <div class="player-cover-wrap">
                    <img id="player-cover-img" class="player-cover-img" src="/static/favicon.svg" alt="cover">
                </div>
                <div class="player-title">–ù–µ—Ç —Ç—Ä–µ–∫–∞</div>
                <div class="player-artist">–î–æ–±–∞–≤—å –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–ø—Ä–∞–≤–∞</div>
                <div class="player-progress" onclick="playerSeek(event)"><div id="player-progress"></div></div>
                <div class="player-time"><span id="player-current">0:00</span> / <span id="player-duration">0:00</span></div>
                <div class="player-controls">
                    <button onclick="playerPrev()">‚èÆ</button>
                    <button onclick="playerPlay()" id="player-play-btn">‚ñ∂</button>
                    <button onclick="playerNext()">‚è≠</button>
                </div>
                <input type="range" class="volume-slider" value="80" onchange="playerVolume(this.value)">
            </div>
            <div class="player-right">
                <div class="setting-row" style="width:100%;">
                    <input type="text" id="music-title-input" placeholder="–°—Å—ã–ª–∫–∞/–∑–∞–ø—Ä–æ—Å (archive, mp3, YouTube, Spotify)">
                    <button onclick="playerAddSource()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div class="setting-row" style="width:100%;">
                    <button onclick="dashaListenTrack()">–î–∞—à–∞ —Å–ª—É—à–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ</button>
                    <label class="upload-btn">–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª<input type="file" accept="audio/*" onchange="playerLoad(this.files)" hidden></label>
                </div>
                <div class="player-queue-head">–û—á–µ—Ä–µ–¥—å</div>
                <div id="player-queue" class="player-queue"><div class="empty">–û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞</div></div>
            </div>
            <audio id="player-audio"></audio>
        </div>
    </template>

    <template id="diary-content">
        <div class="diary-book-app">
            <div class="diary-book-cover">
                <h3>üìù –õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ –î–∞—à–∏</h3>
                <p>–î–Ω–µ–≤–Ω–∏–∫ –≤–µ–¥—ë—Ç —Ç–æ–ª—å–∫–æ –î–∞—à–∞. –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ—Å—Ç—É–ø–µ–Ω —Ä–µ–∂–∏–º —á—Ç–µ–Ω–∏—è.</p>
            </div>
            <div class="diary-toolbar">
                <span id="diary-current-file" class="diary-file-label">–ö–Ω–∏–≥–∞: –∑–∞–≥—Ä—É–∑–∫–∞...</span>
                <button onclick="loadDiaryEntries()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                <button onclick="openDiaryFileInFiles()">–û—Ç–∫—Ä—ã—Ç—å –≤ –§–∞–π–ª–∞—Ö</button>
            </div>
            <div id="diary-entries" class="diary-book-view">
                <div class="empty">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–Ω–µ–≤–Ω–∏–∫–∞...</div>
            </div>
        </div>
    </template>

    <template id="knowledge-content">
        <div class="settings-container">
            <div class="settings-section">
                <h3>üìñ Knowledge Inspector</h3>
                <div class="setting-row">
                    <input id="knowledge-query" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –∏–ª–∏ —Ç–µ–º—É...">
                    <button onclick="knowledgeSearch()">–ü–æ–∏—Å–∫</button>
                </div>
                <div class="setting-row">
                    <button onclick="knowledgeUseInChat()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —á–∞—Ç</button>
                    <button onclick="knowledgeSearch()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div id="knowledge-results" class="knowledge-results">
                    <div class="empty">–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π</div>
                </div>
            </div>
        </div>
    </template>

    <template id="logs-content">
        <div class="logs-container">
            <div class="logs-toolbar">
                <select id="logs-filter" onchange="filterLogs()"><option value="all">–í—Å–µ</option><option value="INFO">INFO</option><option value="WARNING">WARN</option><option value="ERROR">ERROR</option></select>
                <button onclick="refreshLogs()">üîÑ</button>
                <label><input type="checkbox" id="logs-autoscroll" checked> –ê–≤—Ç–æ</label>
            </div>
            <div class="logs-output" id="logs-output"></div>
        </div>
    </template>

    <template id="settings-content">
        <div class="settings-container">
            <div id="mood-indicator">
                <span>üòå</span>
                <span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
            <div class="settings-section">
                <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h3>
                <div class="setting-row"><label>–ò–º—è</label><input type="text" id="setting-name" placeholder="–¢–≤–æ—ë –∏–º—è"></div>
                <div class="setting-row"><label>–ü–æ–ª</label><select id="setting-gender"><option value="">‚Äî</option><option value="male">–ú—É–∂—Å–∫–æ–π</option><option value="female">–ñ–µ–Ω—Å–∫–∏–π</option></select></div>
                <div class="setting-row"><label>–ê–≤–∞—Ç–∞—Ä</label><label class="upload-btn small">–í—ã–±—Ä–∞—Ç—å<input type="file" accept="image/*" onchange="uploadAvatar(this.files[0])" hidden></label></div>
            </div>
            <div class="settings-section">
                <h3>üé® –¢–µ–º–∞</h3>
                <div class="setting-row"><label>–¢–µ–º–∞</label><select id="setting-theme" onchange="applyTheme(this.value)"><option value="pink">–†–æ–∑–æ–≤–∞—è</option><option value="dark">–¢—ë–º–Ω–∞—è</option><option value="blue">–ì–æ–ª—É–±–∞—è</option></select></div>
                <div class="setting-row"><label>–û–±–æ–∏</label><label class="upload-btn small">–í—ã–±—Ä–∞—Ç—å<input type="file" accept="image/*" onchange="uploadWallpaper(this.files[0])" hidden></label></div>
                <div class="setting-row"><label>–ì–æ—Ç–æ–≤—ã–µ –æ–±–æ–∏</label><select id="setting-wallpaper-builtin"></select><button onclick="applyBuiltinWallpaper()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button></div>
                <div class="setting-row"><label>–ù–æ–≤—ã–µ –æ–±–æ–∏</label><input id="setting-wallpaper-prompt" type="text" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: –Ω–µ–∂–Ω—ã–π –≤–µ—á–µ—Ä–Ω–∏–π –≥–æ—Ä–æ–¥"><button onclick="generateWallpaper()">–°–æ–∑–¥–∞—Ç—å</button></div>
                <div class="setting-row"><label>–ü–∞–∫ –∏–∫–æ–Ω–æ–∫</label><select id="setting-icon-pack"><option value="default">–°—Ç–∞–Ω–¥–∞—Ä—Ç</option><option value="soft">Soft</option><option value="line">Line</option><option value="bootstrap">Bootstrap Icons</option></select></div>
                <div class="setting-row"><label>–ê–≤—Ç–æ—Å–º–µ–Ω–∞ –æ–±–æ–µ–≤</label><input type="checkbox" id="setting-auto-wallpaper"></div>
            </div>
            <div class="settings-section">
                <h3>ü§ñ –î–∞—Ä—å—è</h3>
                <div class="setting-row"><label>–†–µ–∂–∏–º</label><select id="setting-mode"><option value="adaptive">–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π</option><option value="companion">–ü–æ–¥—Ä—É–≥–∞</option><option value="assistant">–ü–æ–º–æ—â–Ω–∏–∫</option></select></div>
                <div class="setting-row"><label>–†–µ–∂–∏–º –¥–Ω—è</label><select id="setting-day-routine"><option value="realistic">–û–±—ã—á–Ω—ã–π</option><option value="early_bird">–ñ–∞–≤–æ—Ä–æ–Ω–æ–∫</option><option value="night_owl">–°–æ–≤–∞</option></select></div>
                <div class="setting-row"><label>–í–Ω–∏–º–∞–Ω–∏–µ</label><input type="checkbox" id="setting-attention" checked></div>
                <div class="setting-row"><label>–°–≤–æ–±–æ–¥–Ω—ã–µ —Ç–µ–º—ã</label><input type="checkbox" id="setting-unrestricted-topics"></div>
                <div class="setting-row"><label>–ó—Ä–µ–Ω–∏–µ (—Å–µ–Ω—Å–æ—Ä—ã)</label><select id="setting-vision-provider"><option value="auto">Auto</option><option value="blip2">BLIP-2</option><option value="blip">BLIP</option><option value="basic">Basic</option><option value="classifier">Classifier</option></select></div>
                <div class="setting-row"><label>–°–ª—É—Ö (—Å–µ–Ω—Å–æ—Ä—ã)</label><select id="setting-audio-provider"><option value="auto">Auto</option><option value="whisper">Whisper</option><option value="hf_asr">HF ASR</option><option value="google_sr">Google SR</option></select></div>
                <div class="setting-row"><label>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</label><input type="checkbox" id="setting-show-mood" checked></div>
                <div class="setting-row"><label>–†–∞–∑—É–º (LLM)</label><span id="llm-status">‚Äî</span></div>
            </div>
            <button class="btn-primary" onclick="saveSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </template>

    <template id="memory-content">
        <div class="memory-container">
            <div class="memory-stats">
                <div class="stat"><span class="stat-value" id="stat-conversations">0</span><span>üí¨ –î–∏–∞–ª–æ–≥–æ–≤</span></div>
                <div class="stat"><span class="stat-value" id="stat-facts">0</span><span>üìù –§–∞–∫—Ç–æ–≤</span></div>
            </div>
            <div class="memory-facts" id="memory-facts"></div>
            <button class="btn-danger" onclick="clearMemory()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </template>

    <template id="store-content">
        <div class="store-container">
            <div class="store-header"><h3>üõí –ú–∞–≥–∞–∑–∏–Ω –ø–ª–∞–≥–∏–Ω–æ–≤</h3><button onclick="refreshStore()">üîÑ</button></div>
            <div class="store-plugins" id="store-plugins"><div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
        </div>
    </template>

    <template id="updater-content">
        <div class="settings-container">
            <div class="settings-section">
                <h3>‚¨ÜÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</h3>
                <div class="setting-row"><label>–°–æ—Å—Ç–æ—è–Ω–∏–µ</label><span id="updater-state">–ó–∞–≥—Ä—É–∑–∫–∞...</span></div>
                <div class="setting-row"><label>–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</label><input id="updater-auto" type="checkbox" onchange="updaterToggleAuto(this)"></div>
                <div class="setting-row"><label>GitHub repo</label><input id="updater-repo" type="text" value="dariumi/Daria"></div>
                <div class="setting-row"><label>–í–µ—Ç–∫–∞</label><input id="updater-ref" type="text" value="main"></div>
                <div class="setting-row"><button onclick="updaterCheck()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button><button class="btn-primary" onclick="updaterRunGithub()">–û–±–Ω–æ–≤–∏—Ç—å –∏–∑ GitHub</button></div>
                <div class="setting-row"><label>–ê—Ä—Ö–∏–≤ (.zip/.tar.gz)</label><input id="updater-archive-path" type="text" placeholder="/path/to/Daria-update.zip"></div>
                <div class="setting-row"><button onclick="updaterRunArchive()">–û–±–Ω–æ–≤–∏—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞</button></div>
                <p id="updater-core-info">‚Äî</p>
            </div>
            <div class="settings-section">
                <h3>üß© –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤</h3>
                <div class="setting-row"><button onclick="updaterLoadPluginUpdates()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–ª–∞–≥–∏–Ω—ã</button><button onclick="updaterUpdateAllPlugins()">–û–±–Ω–æ–≤–∏—Ç—å –≤—Å—ë</button></div>
                <div id="updater-plugin-updates"><div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
            </div>
        </div>
    </template>

    <template id="support-content">
        <div class="support-container">
            <div class="support-icon">‚òï</div>
            <h2>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h2>
            <p>DARIA ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –ï—Å–ª–∏ –Ω—Ä–∞–≤–∏—Ç—Å—è, –ø–æ–¥–¥–µ—Ä–∂–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É! üíï</p>
            <div class="support-buttons">
                <a href="https://www.buymeacoffee.com/dariumi" target="_blank" class="support-btn coffee">‚òï Buy Me a Coffee</a>
                <a href="https://boosty.to/dariumi" target="_blank" class="support-btn boosty">üå∏ Boosty</a>
                <a href="https://github.com/dariumi/Daria" target="_blank" class="support-btn github">‚≠ê GitHub Star</a>
            </div>
            <p class="thanks">–°–ø–∞—Å–∏–±–æ! üíñ ‚Äî –î–∞—Ä—å—è</p>
        </div>
    </template>

    <template id="about-content">
        <div class="about-container">
            <div class="about-avatar">üå∏</div>
            <h2>–î–∞—Ä—å—è</h2>
            <span class="version">v{{ version }}</span>
            <p>–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Ä—É–≥–∞ –∏ –ø–æ–º–æ—â–Ω–∏—Ü–∞. üíï</p>
            <p>–õ—é–±–ª—é –æ–±—â–∞—Ç—å—Å—è –∏ –ø–æ–º–æ–≥–∞—Ç—å —Å –∑–∞–¥–∞—á–∞–º–∏!</p>
            <div class="about-links">
                <a href="https://github.com/dariumi/Daria" target="_blank">GitHub</a>
                <a href="https://t.me/daria_ai" target="_blank">Telegram</a>
            </div>
            <p class="footer">–°–¥–µ–ª–∞–Ω–æ —Å üíï</p>
        </div>
    </template>

    <script src="/static/js/desktop.js"></script>
</body>
</html>
