<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DARIA v{{ version }}</title>
    <link rel="stylesheet" href="/static/css/desktop.css">
</head>
<body>
    <div id="desktop">
        <div id="desktop-icons"></div>
        <div id="windows-container"></div>
        <div id="daria-avatar" title="–ë—ã—Å—Ç—Ä—ã–π —á–∞—Ç">
            <div class="avatar-image">üå∏</div>
            <div class="avatar-status online"></div>
        </div>
        <div id="quick-chat" class="hidden">
            <div class="quick-chat-header"><span>üí¨ –ß–∞—Ç</span><button onclick="toggleQuickChat()">√ó</button></div>
            <div class="quick-chat-messages" id="quick-messages"></div>
            <div class="quick-chat-input">
                <input type="text" id="quick-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter')sendQuickMessage()">
                <button onclick="sendQuickMessage()">‚û§</button>
            </div>
        </div>
        <div id="notifications-container"></div>
    </div>

    <div id="taskbar">
        <button id="start-button" onclick="toggleStartMenu()"><span>üå∏</span><span>DARIA</span></button>
        <div id="taskbar-windows"></div>
        <div id="taskbar-right">
            <div id="attention-toggle" onclick="toggleAttention()" title="–í–Ω–∏–º–∞–Ω–∏–µ">üíï</div>
            <div id="status-indicator" class="offline">‚óè</div>
            <div id="clock"></div>
        </div>
    </div>

    <div id="start-menu" class="hidden">
        <div class="start-header"><div class="start-avatar">üå∏</div><div><div class="start-name">–î–∞—Ä—å—è</div><div class="start-version">v{{ version }}</div></div></div>
        <div class="start-items">
            <div class="start-item" onclick="openWindow('chat');toggleStartMenu()"><span>üí¨</span>–ß–∞—Ç</div>
            <div class="start-item" onclick="openWindow('files');toggleStartMenu()"><span>üìÅ</span>–§–∞–π–ª—ã</div>
            <div class="start-item" onclick="openWindow('terminal');toggleStartMenu()"><span>üíª</span>–¢–µ—Ä–º–∏–Ω–∞–ª</div>
            <div class="start-item" onclick="openWindow('store');toggleStartMenu()"><span>üõí</span>–ú–∞–≥–∞–∑–∏–Ω</div>
            <div class="start-item" onclick="openWindow('settings');toggleStartMenu()"><span>‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div class="start-item" onclick="openWindow('support');toggleStartMenu()"><span>‚òï</span>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</div>
            <div class="start-item" onclick="openWindow('about');toggleStartMenu()"><span>üíï</span>–û –î–∞—Ä—å–µ</div>
        </div>
    </div>

    <div id="welcome-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header"><h2>üå∏ –ü—Ä–∏–≤–µ—Ç!</h2></div>
            <div class="modal-body">
                <p>–Ø –î–∞—Ä—å—è, —Ç–≤–æ—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Ä—É–≥–∞!</p>
                <p>–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?</p>
                <input type="text" id="welcome-name" placeholder="–¢–≤–æ—ë –∏–º—è..." onkeypress="if(event.key==='Enter')closeWelcome()">
                <div class="gender-select">
                    <label><input type="radio" name="gender" value="male"> üë® –ü–∞—Ä–µ–Ω—å</label>
                    <label><input type="radio" name="gender" value="female"> üë© –î–µ–≤—É—à–∫–∞</label>
                </div>
            </div>
            <div class="modal-footer"><button class="btn-primary" onclick="closeWelcome()">–ù–∞—á–∞—Ç—å! üíï</button></div>
        </div>
    </div>

    <template id="window-template">
        <div class="window">
            <div class="window-header">
                <div class="window-title"><span class="window-icon"></span><span class="window-name"></span></div>
                <div class="window-controls">
                    <button class="win-btn minimize">‚àí</button>
                    <button class="win-btn maximize">‚ñ°</button>
                    <button class="win-btn close">√ó</button>
                </div>
            </div>
            <div class="window-content"></div>
            <div class="window-resize-handle"></div>
        </div>
    </template>

    <template id="chat-content">
        <div class="chat-container">
            <div class="chat-sidebar">
                <button class="new-chat-btn" onclick="newChat()">+ –ù–æ–≤—ã–π —á–∞—Ç</button>
                <div class="chat-history" id="chat-history"></div>
            </div>
            <div class="chat-main">
                <div class="chat-messages" id="chat-messages"></div>
                <div class="chat-typing hidden" id="chat-typing">–î–∞—Ä—å—è –ø–µ—á–∞—Ç–∞–µ—Ç<span class="dots">...</span></div>
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="if(event.key==='Enter')sendChatMessage()">
                    <button onclick="sendChatMessage()">‚û§</button>
                </div>
            </div>
        </div>
    </template>

    <template id="files-content">
        <div class="files-container">
            <div class="files-toolbar">
                <span id="files-path">/</span>
                <button onclick="loadFiles(state.currentPath)">üîÑ</button>
                <button onclick="createNewFile()">üìÑ</button>
                <button onclick="createNewFolder()">üìÅ</button>
                <label class="upload-btn">‚¨ÜÔ∏è<input type="file" onchange="uploadFile(this)" hidden></label>
            </div>
            <div class="files-list" id="files-list"></div>
            <div id="file-editor" class="file-editor hidden">
                <div class="editor-header">
                    <input type="text" id="file-editor-path" readonly>
                    <button onclick="saveFile()">üíæ</button>
                    <button onclick="closeEditor()">‚úñ</button>
                </div>
                <textarea id="file-editor-content"></textarea>
            </div>
        </div>
    </template>

    <template id="terminal-content">
        <div class="terminal-container">
            <div class="terminal-output" id="terminal-output">
                <div class="term-line">DARIA Terminal v0.7.0</div>
                <div class="term-line">–í–≤–µ–¥–∏ help –¥–ª—è –∫–æ–º–∞–Ω–¥</div>
            </div>
            <div class="terminal-input"><span>$</span><input type="text" id="terminal-input" onkeypress="if(event.key==='Enter')executeTerminal()"></div>
        </div>
    </template>

    <template id="browser-content">
        <div class="browser-container">
            <div class="browser-toolbar">
                <button onclick="browserBack()">‚Üê</button>
                <button onclick="browserForward()">‚Üí</button>
                <input type="text" id="browser-url" value="https://google.com" onkeypress="if(event.key==='Enter')browserGo()">
                <button onclick="browserGo()">‚Üí</button>
            </div>
            <iframe id="browser-frame"></iframe>
        </div>
    </template>

    <template id="player-content">
        <div class="player-container">
            <div class="player-cover">üéµ</div>
            <div class="player-title">–ù–µ—Ç —Ç—Ä–µ–∫–∞</div>
            <div class="player-artist">–ó–∞–≥—Ä—É–∑–∏ –º—É–∑—ã–∫—É</div>
            <div class="player-progress"><div id="player-progress"></div></div>
            <div class="player-time"><span id="player-current">0:00</span> / <span id="player-duration">0:00</span></div>
            <div class="player-controls">
                <button onclick="playerPrev()">‚èÆ</button>
                <button onclick="playerPlay()" id="player-play-btn">‚ñ∂</button>
                <button onclick="playerNext()">‚è≠</button>
            </div>
            <input type="range" class="volume-slider" value="80" onchange="playerVolume(this.value)">
            <label class="upload-btn">üéµ –í—ã–±—Ä–∞—Ç—å<input type="file" accept="audio/*" onchange="playerLoad(this.files)" hidden></label>
            <audio id="player-audio"></audio>
        </div>
    </template>

    <template id="logs-content">
        <div class="logs-container">
            <div class="logs-toolbar">
                <select id="logs-filter" onchange="filterLogs()"><option value="all">–í—Å–µ</option><option value="INFO">INFO</option><option value="WARNING">WARN</option><option value="ERROR">ERROR</option></select>
                <button onclick="refreshLogs()">üîÑ</button>
                <label><input type="checkbox" id="logs-autoscroll" checked> –ê–≤—Ç–æ</label>
            </div>
            <div class="logs-output" id="logs-output"></div>
        </div>
    </template>

    <template id="settings-content">
        <div class="settings-container">
            <div id="mood-indicator">
                <span>üòå</span>
                <span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            </div>
            <div class="settings-section">
                <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h3>
                <div class="setting-row"><label>–ò–º—è</label><input type="text" id="setting-name" placeholder="–¢–≤–æ—ë –∏–º—è"></div>
                <div class="setting-row"><label>–ü–æ–ª</label><select id="setting-gender"><option value="">‚Äî</option><option value="male">–ú—É–∂—Å–∫–æ–π</option><option value="female">–ñ–µ–Ω—Å–∫–∏–π</option></select></div>
                <div class="setting-row"><label>–ê–≤–∞—Ç–∞—Ä</label><label class="upload-btn small">–í—ã–±—Ä–∞—Ç—å<input type="file" accept="image/*" onchange="uploadAvatar(this.files[0])" hidden></label></div>
            </div>
            <div class="settings-section">
                <h3>üé® –¢–µ–º–∞</h3>
                <div class="setting-row"><label>–¢–µ–º–∞</label><select id="setting-theme" onchange="applyTheme(this.value)"><option value="pink">–†–æ–∑–æ–≤–∞—è</option><option value="dark">–¢—ë–º–Ω–∞—è</option><option value="blue">–ì–æ–ª—É–±–∞—è</option></select></div>
                <div class="setting-row"><label>–û–±–æ–∏</label><label class="upload-btn small">–í—ã–±—Ä–∞—Ç—å<input type="file" accept="image/*" onchange="uploadWallpaper(this.files[0])" hidden></label></div>
            </div>
            <div class="settings-section">
                <h3>ü§ñ –î–∞—Ä—å—è</h3>
                <div class="setting-row"><label>–†–µ–∂–∏–º</label><select id="setting-mode"><option value="adaptive">–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π</option><option value="companion">–ü–æ–¥—Ä—É–≥–∞</option><option value="assistant">–ü–æ–º–æ—â–Ω–∏–∫</option></select></div>
                <div class="setting-row"><label>–í–Ω–∏–º–∞–Ω–∏–µ</label><input type="checkbox" id="setting-attention" checked></div>
                <div class="setting-row"><label>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</label><input type="checkbox" id="setting-show-mood" checked></div>
                <div class="setting-row"><label>LLM</label><span id="llm-status">‚Äî</span></div>
            </div>
            <button class="btn-primary" onclick="saveSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </template>

    <template id="memory-content">
        <div class="memory-container">
            <div class="memory-stats">
                <div class="stat"><span class="stat-value" id="stat-conversations">0</span><span>üí¨ –î–∏–∞–ª–æ–≥–æ–≤</span></div>
                <div class="stat"><span class="stat-value" id="stat-facts">0</span><span>üìù –§–∞–∫—Ç–æ–≤</span></div>
            </div>
            <div class="memory-facts" id="memory-facts"></div>
            <button class="btn-danger" onclick="clearMemory()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </template>

    <template id="store-content">
        <div class="store-container">
            <div class="store-header"><h3>üõí –ú–∞–≥–∞–∑–∏–Ω –ø–ª–∞–≥–∏–Ω–æ–≤</h3><button onclick="refreshStore()">üîÑ</button></div>
            <div class="store-plugins" id="store-plugins"><div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>
        </div>
    </template>

    <template id="support-content">
        <div class="support-container">
            <div class="support-icon">‚òï</div>
            <h2>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h2>
            <p>DARIA ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –ï—Å–ª–∏ –Ω—Ä–∞–≤–∏—Ç—Å—è, –ø–æ–¥–¥–µ—Ä–∂–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É! üíï</p>
            <div class="support-buttons">
                <a href="https://www.buymeacoffee.com/dariumi" target="_blank" class="support-btn coffee">‚òï Buy Me a Coffee</a>
                <a href="https://boosty.to/dariumi" target="_blank" class="support-btn boosty">üå∏ Boosty</a>
                <a href="https://github.com/dariumi/Daria" target="_blank" class="support-btn github">‚≠ê GitHub Star</a>
            </div>
            <p class="thanks">–°–ø–∞—Å–∏–±–æ! üíñ ‚Äî –î–∞—Ä—å—è</p>
        </div>
    </template>

    <template id="about-content">
        <div class="about-container">
            <div class="about-avatar">üå∏</div>
            <h2>–î–∞—Ä—å—è</h2>
            <span class="version">v{{ version }}</span>
            <p>–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Ä—É–≥–∞ –∏ –ø–æ–º–æ—â–Ω–∏—Ü–∞. üíï</p>
            <p>–õ—é–±–ª—é –æ–±—â–∞—Ç—å—Å—è –∏ –ø–æ–º–æ–≥–∞—Ç—å —Å –∑–∞–¥–∞—á–∞–º–∏!</p>
            <div class="about-links">
                <a href="https://github.com/dariumi/Daria" target="_blank">GitHub</a>
                <a href="https://t.me/daria_ai" target="_blank">Telegram</a>
            </div>
            <p class="footer">–°–¥–µ–ª–∞–Ω–æ —Å üíï</p>
        </div>
    </template>

    <script src="/static/js/desktop.js"></script>
</body>
</html>